{"ast":null,"code":"import _objectSpread from\"/home/nikhilchauhan/react-tutorial/react-complete-guide-code/code/01-starting-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/nikhilchauhan/react-tutorial/react-complete-guide-code/code/01-starting-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/nikhilchauhan/react-tutorial/react-complete-guide-code/code/01-starting-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/nikhilchauhan/react-tutorial/react-complete-guide-code/code/01-starting-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useReducer,useCallback}from'react';function httpReducer(state,action){if(action.type==='SEND'){return{data:null,error:null,status:'pending'};}if(action.type==='SUCCESS'){return{data:action.responseData,error:null,status:'completed'};}if(action.type==='ERROR'){return{data:null,error:action.errorMessage,status:'completed'};}return state;}function useHttp(requestFunction){var startWithPending=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _useReducer=useReducer(httpReducer,{status:startWithPending?'pending':null,data:null,error:null}),_useReducer2=_slicedToArray(_useReducer,2),httpState=_useReducer2[0],dispatch=_useReducer2[1];var sendRequest=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(requestData){var responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch({type:'SEND'});_context.prev=1;_context.next=4;return requestFunction(requestData);case 4:responseData=_context.sent;dispatch({type:'SUCCESS',responseData:responseData});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:'ERROR',errorMessage:_context.t0.message||'Something went wrong!'});case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[requestFunction]);return _objectSpread({sendRequest:sendRequest},httpState);}export default useHttp;","map":{"version":3,"names":["useReducer","useCallback","httpReducer","state","action","type","data","error","status","responseData","errorMessage","useHttp","requestFunction","startWithPending","arguments","length","undefined","_useReducer","_useReducer2","_slicedToArray","httpState","dispatch","sendRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestData","wrap","_callee$","_context","prev","next","sent","t0","message","stop","_x","apply","_objectSpread"],"sources":["/home/nikhilchauhan/react-tutorial/react-complete-guide-code/code/01-starting-project/src/hooks/use-http.js"],"sourcesContent":["import { useReducer, useCallback } from 'react';\n\nfunction httpReducer(state, action) {\n  if (action.type === 'SEND') {\n    return {\n      data: null,\n      error: null,\n      status: 'pending',\n    };\n  }\n\n  if (action.type === 'SUCCESS') {\n    return {\n      data: action.responseData,\n      error: null,\n      status: 'completed',\n    };\n  }\n\n  if (action.type === 'ERROR') {\n    return {\n      data: null,\n      error: action.errorMessage,\n      status: 'completed',\n    };\n  }\n\n  return state;\n}\n\nfunction useHttp(requestFunction, startWithPending = false) {\n  const [httpState, dispatch] = useReducer(httpReducer, {\n    status: startWithPending ? 'pending' : null,\n    data: null,\n    error: null,\n  });\n\n  const sendRequest = useCallback(\n    async function (requestData) {\n      dispatch({ type: 'SEND' });\n      try {\n        const responseData = await requestFunction(requestData);\n        dispatch({ type: 'SUCCESS', responseData });\n      } catch (error) {\n        dispatch({\n          type: 'ERROR',\n          errorMessage: error.message || 'Something went wrong!',\n        });\n      }\n    },\n    [requestFunction]\n  );\n\n  return {\n    sendRequest,\n    ...httpState,\n  };\n}\n\nexport default useHttp;\n"],"mappings":"2rBAAA,OAASA,UAAU,CAAEC,WAAW,KAAQ,OAAO,CAE/C,QAAS,CAAAC,WAAWA,CAACC,KAAK,CAAEC,MAAM,CAAE,CAClC,GAAIA,MAAM,CAACC,IAAI,GAAK,MAAM,CAAE,CAC1B,MAAO,CACLC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IAAI,CACXC,MAAM,CAAE,SACV,CAAC,CACH,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,SAAS,CAAE,CAC7B,MAAO,CACLC,IAAI,CAAEF,MAAM,CAACK,YAAY,CACzBF,KAAK,CAAE,IAAI,CACXC,MAAM,CAAE,WACV,CAAC,CACH,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,OAAO,CAAE,CAC3B,MAAO,CACLC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAEH,MAAM,CAACM,YAAY,CAC1BF,MAAM,CAAE,WACV,CAAC,CACH,CAEA,MAAO,CAAAL,KAAK,CACd,CAEA,QAAS,CAAAQ,OAAOA,CAACC,eAAe,CAA4B,IAA1B,CAAAC,gBAAgB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CACxD,IAAAG,WAAA,CAA8BjB,UAAU,CAACE,WAAW,CAAE,CACpDM,MAAM,CAAEK,gBAAgB,CAAG,SAAS,CAAG,IAAI,CAC3CP,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,IACT,CAAC,CAAC,CAAAW,YAAA,CAAAC,cAAA,CAAAF,WAAA,IAJKG,SAAS,CAAAF,YAAA,IAAEG,QAAQ,CAAAH,YAAA,IAM1B,GAAM,CAAAI,WAAW,CAAGrB,WAAW,6BAAAsB,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAC7B,SAAAC,QAAgBC,WAAW,MAAAnB,YAAA,QAAAgB,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACzBZ,QAAQ,CAAC,CAAEhB,IAAI,CAAE,MAAO,CAAC,CAAC,CAAC0B,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEE,CAAArB,eAAe,CAACgB,WAAW,CAAC,QAAjDnB,YAAY,CAAAsB,QAAA,CAAAG,IAAA,CAClBb,QAAQ,CAAC,CAAEhB,IAAI,CAAE,SAAS,CAAEI,YAAY,CAAZA,YAAa,CAAC,CAAC,CAACsB,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAI,EAAA,CAAAJ,QAAA,aAE5CV,QAAQ,CAAC,CACPhB,IAAI,CAAE,OAAO,CACbK,YAAY,CAAEqB,QAAA,CAAAI,EAAA,CAAMC,OAAO,EAAI,uBACjC,CAAC,CAAC,CAAC,yBAAAL,QAAA,CAAAM,IAAA,MAAAV,OAAA,gBAEN,mBAAAW,EAAA,SAAAf,IAAA,CAAAgB,KAAA,MAAAzB,SAAA,QACD,CAACF,eAAe,CAClB,CAAC,CAED,OAAA4B,aAAA,EACElB,WAAW,CAAXA,WAAW,EACRF,SAAS,EAEhB,CAEA,cAAe,CAAAT,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}